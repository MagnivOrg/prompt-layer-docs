---
title: "Structured Outputs"
icon: "diagram-project"
---

Structured outputs allow you to ensure that LLM responses follow a specific format, enabling consistent parsing and integration with your applications. PromptLayer supports creating structured outputs through JSON schemas and tool/function call schemas.

## What are Structured Outputs?

Structured outputs define a schema that the LLM must follow when generating responses. This ensures:

- Consistent response formats
- Easier parsing and validation
- More reliable integration with your applications
- Reduced need for error handling

With structured outputs, you can get LLMs to return data in formats like:
- Customer records
- Product information
- Analytical results
- Event details
- API payloads

## Creating Structured Outputs with JSON Schema

You can define the structure of your LLM outputs using JSON Schema, which specifies the expected fields, types, and constraints.

![JSON Schema Editor](/images/structured-outputs-schema.png)

When you create a prompt template in PromptLayer, you can add a JSON schema by:

1. Editing your prompt template
2. Clicking on "Add Response Format"
3. Selecting "JSON Schema"
4. Defining your schema structure

Example JSON schema for a customer review analysis:

```json
{
  "type": "object",
  "properties": {
    "sentiment": {
      "type": "string",
      "enum": ["positive", "neutral", "negative"],
      "description": "The overall sentiment of the review"
    },
    "topics": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "List of topics mentioned in the review"
    },
    "rating": {
      "type": "integer",
      "minimum": 1,
      "maximum": 5,
      "description": "Inferred rating on a scale of 1-5"
    }
  },
  "required": ["sentiment", "topics", "rating"]
}
```

## Using Variables in Structured Outputs

You can make your structured output schemas more dynamic by incorporating template variables within the schema definition. This powerful feature allows you to:

- Customize schema properties based on runtime data
- Generate different schema structures for different scenarios
- Adapt validation rules based on context

### How to Use Variables in JSON Schemas

When defining your JSON schema, you can include template variables using the same syntax as in your prompt templates:

<CodeGroup>

```json F-string
{
  "type": "object",
  "properties": {
    "sentiment": {
      "type": "string",
      "enum": {sentiment_options},
      "description": "The sentiment of the text"
    },
    "topics": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "List of topics mentioned in the {document_type}"
    }
  }
}
```

```json Jinja2
{
  "type": "object",
  "properties": {
    "sentiment": {
      "type": "string",
      "enum": {{ sentiment_options }},
      "description": "The sentiment of the text"
    },
    "topics": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "List of topics mentioned in the {{ document_type }}"
    }
  }
}
```

</CodeGroup>

When running the prompt, provide values for these variables just like any other template variables:

```python
response = pl.run(
   prompt_name="content_analyzer",
   input_variables={
       "text": "I really enjoyed the new restaurant downtown. The food was amazing and the service was excellent.",
       "sentiment_options": ["positive", "neutral", "negative"],
       "document_type": "review"
   },
)
```

For a comprehensive guide on template variables and the different formatting options available, see our [Template Variables documentation](/features/prompt-registry/template-variables).

### Best Practices for Variables in Schemas

- Use variables for enum values that might change based on context
- Consider using variables for numeric constraints (min/max values)
- Ensure all variables used in the schema are provided in input_variables
- Be careful with syntax when using variables within JSON - proper formatting is essential
